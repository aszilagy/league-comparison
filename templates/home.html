<!DOCTYPE html>
<html lang="en" dir="ltr">

	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="/static/css/bootstrap.min.css">
		<link rel="stylesheet" href="/static/css/home-style.css">
		<link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600,800,900" rel="stylesheet" type="text/css">
		<title>Home</title>
	</head>

	<body onload=loadPage()>
		<div class="topBar">
			<form action = "/summoners/" method = "POST">
			<div class="form-row">
				<div class="col">
					<input name="summoner1_input" type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" placeholder="Summoner1">
				</div>
				<div class="col">
					<input name="summoner2_input" type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" placeholder="Summoner2">
				</div>
				<div class="col">
					<input name="champion_input" type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" placeholder="Champion">
				</div>
				<div class="col">
					<button class="btn btn-primary" type = "submit" value = "submit">Submit</button>
				</div>
			</div>
			</form>
		</div>

		<div class="split left">

			<div class="centered">
				<img src="http://ddragon.leagueoflegends.com/cdn/9.6.1/img/profileicon/{{summoner1.icon}}.png" alt="Summoner_2_Icon">
				<h2>{{summoner1.name}}</h2>
				<p>{{summoner1.rank.tier}} {{summoner1.rank.rank}} - {{summoner1.rank.leaguePoints}} LP</p>
			</div>
			<div class="centerLines centerLinesLeft">
				<p>Win Rate</p>
				<div id="summoner1Win"></div>

				<p>Games Played - {{summoner1.gamesPlayed}}</p>
				<div id="summoner1Loss"></div>
			</div>

		</div>

		<div class="split right">
			<div class="centered">
				<img src="http://ddragon.leagueoflegends.com/cdn/9.6.1/img/profileicon/{{summoner2.icon}}.png" alt="Summoner_2_Icon">
				<h2>{{summoner2.name}}</h2>
				<p>{{summoner2.rank.tier}} {{summoner2.rank.rank}} - {{summoner2.rank.leaguePoints}} LP</p>
			</div>
			<div class="centerLines centerLinesRight">
				<p>Win Rate</p>
				<div id="summoner2Win"></div>

				<p>Games Played - {{summoner2.gamesPlayed}}</p>
				<div id="summoner2Loss"></div>
			</div>

		</div>

		<script src="/static/js/progressbar.js"></script>
		<script src="/static/js/require.js">
			alert('a');
			var ProgressBar = require(['/static/js/progressbar.js'], function(){
			});

		</script>

		<script>
			function makeBar(containerName, transformPer, percentage, whichSide){
				var bar = new ProgressBar.Line(containerName, {
					strokeWidth: 4,
					easing: 'easeInOut',
					duration: 1400,
					color: '#FFEA82',
					trailColor: '#eee',
					trailWidth: 1,
					svgStyle: { width: '100%', height: '100%', transform: transformPer},
					text: {
						style: {
							color: '#FFFFFF',
							position: 'absolute',
							whichSide: '90%',
							padding: 0,
							margin: 0,
							transform: null
						},
						autoStyleContainer: false
					},
					from: {color: '#FFEA82'},
					to: {color: '#ED6A5A'},
					step: (state, bar) => {
						bar.setText(Math.round(bar.value() * 100) + ' %');
					}
				}); bar.animate(percentage);  // Number from 0.0 to 1.0
			}
var s1Total = {{summoner1.rank.wins}} + {{summoner1.rank.losses}};
var s2Total = {{summoner2.rank.wins}} + {{summoner2.rank.losses}};
if(s1Total > s2Total){
	s2Total = (s2Total / s1Total);
	s1Total = 1;
}
else{
	s1Total = (s1Total / s2Total);
	s2Total = 1
}
makeBar(summoner1Win, "scale(-1, 1)", {{s1Wins}}, 'left');
makeBar(summoner1Loss, "scale(-1, 1)", s1Total, 'left');
makeBar(summoner2Win, "scale(1, 1)", {{s2Wins}}, 'right');
makeBar(summoner2Loss, "scale(1, 1)", s2Total, 'right');
		</script>
	</body>

</html>
